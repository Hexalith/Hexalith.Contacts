@page "/Contact/Contact/Add"
@inject Services.IContactQueryService ContactQueryService
@inject NavigationManager NavigationManager
@inject IStringLocalizer<ContactDetails> L
@inject IClientCommandService CommandService
@using Hexalith.Infrastructure.ClientApp.Services
@using Labels = Hexalith.Contacts.Shared.Resources.Contacts.Pages.ContactAdd
@using Hexalith.Contacts.Commands

<FluentStack Orientation="Orientation.Vertical" Style="padding:20px;">
	<h3>@Labels.Title</h3>
	@if (data is not null)
	{
		<FluentStack Orientation="Orientation.Vertical">
			<FluentStack Orientation="Orientation.Vertical">
				<FluentTextField @bind-Value="data.Id" Label="@Labels.Id"></FluentTextField>
				<FluentTextField @bind-Value="data.Name" Label="@Labels.Name"></FluentTextField>
				<FluentTextField @bind-Value="data.Description" Label="@Labels.Description"></FluentTextField>
			</FluentStack>
			<FluentSpacer />
			<FluentButton Appearance="Appearance.Accent" IconStart="@(new Icons.Regular.Size24.Save())" OnClick="OnSave">@Labels.Save</FluentButton>
		</FluentStack>
	}
</FluentStack>

@code {
	ViewModels.ContactAdd data = new();

	public async Task OnSave()
	{
			await CommandService.SendCommandAsync(new Hexalith.Contacts.Commands.AddContact(data.Id, data.Name, data.Description, new Contact.Domain.ValueObjects.Person()), CancellationToken.None);
		NavigationManager.NavigateTo("/Contact/Contact");
	}
}